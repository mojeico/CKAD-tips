apiVersion: v1
kind: PersistentVolume
metadata:
  name: log-volume
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: "/opt/volume/nginx"

---

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: log-claim
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 200Mi

---

apiVersion: v1
kind: Pod
metadata:
  labels:
    run: nginx
  name: nginx
spec:

  volumes:
    - name: log-volume
      persistentVolumeClaim:
        claimName: log-claim

  containers:
    - image: nginx:alpine
      name: nginx

      volumeMounts:
        - mountPath: "/var/log/nginx"
          name: log-volume

  dnsPolicy: ClusterFirst
  restartPolicy: Always

